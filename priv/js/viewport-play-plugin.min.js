var ViewportPlayPlugin;(()=>{var e={902:()=>{(()=>{"use strict";var e={30:function(e,t){var i,n=this&&this.__extends||(i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},i(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function n(){this.constructor=e}i(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0}),t.UAGANotInitializedException=void 0;var o=function(e){function t(t,i){return e.call(this,"[UAGANotInitializedException] ".concat(t),i)||this}return n(t,e),t}(Error);t.UAGANotInitializedException=o},922:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseEventToGA4=t.GA4Tracker=void 0;var i=function(){function e(){}return e.prototype.send=function(e){var t=n(e);window.dataLayer=window.dataLayer||[],window.dataLayer.push(t)},e}();function n(e){return{event:"portfolio_web",event_category:e.category,event_action:e.action,event_label:e.label,event_value:e.value,event_noninteraction:!!e.nointeraction}}t.GA4Tracker=i,t.parseEventToGA4=n},362:(e,t,i)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseEventToUA=t.parseUAtoEvent=t.pushSender=t.globalSender=t.UATracker=void 0;var n=i(30),o=function(){function e(e){this.configs=e}return e.prototype.send=function(){},e}();t.UATracker=o,t.globalSender=function(e,t){var i=t&&t.panic;if(!window.ga&&i)throw new n.UAGANotInitializedException('"window.ga" não foi definido');if(window.ga){if("function"!=typeof window.ga)throw new n.UAGANotInitializedException('"window.ga" não é uma função.');window.ga.apply(window,e)}},t.pushSender=function(e,t){var i=t&&t.panic;if(!window._ga&&i)throw new n.UAGANotInitializedException('"window._ga" não foi definido.');if(window._ga){if(window._ga instanceof Array==0&&i)throw new n.UAGANotInitializedException('"window.ga" não é um Array.');window._ga=window._ga?window._ga:[],window._ga.push(e)}},t.parseUAtoEvent=function(e){return e[0],{event:e[1],category:e[2],action:e[3],label:e[4],nointeraction:e[5]}},t.parseEventToUA=function(e){return["_trackEvent",e.event,e.category,e.action,e.label,e.nointeraction]}},843:(e,t)=>{Object.defineProperty(t,"__esModule",{value:!0}),t.parseEventToHorizon=t.HorizonTracker=void 0;var i=function(){function e(e){this.horizonClient=e}return e.prototype.send=function(e){var t=n(e);this.horizonClient.send(t)},e}();function n(e){return{id:"common-event",version:"0.1",contentType:"common",properties:{eventCategory:e.category,eventAction:e.action,eventLabel:e.label}}}t.HorizonTracker=i,t.parseEventToHorizon=n},304:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var o in t=arguments[i])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Tracker=void 0;var o=i(362),r=function(){function e(e){this.config=e,this.config=n({},e)}return e.prototype.push=function(e){var t=(0,o.parseUAtoEvent)(e);this.config.clients.forEach((function(e){e.send(t)}))},e.prototype.send=function(e){this.config.clients.forEach((function(t){t.send(e)}))},e}();t.Tracker=r},156:function(e,t,i){var n=this&&this.__createBinding||(Object.create?function(e,t,i,n){void 0===n&&(n=i);var o=Object.getOwnPropertyDescriptor(t,i);o&&!("get"in o?!t.__esModule:o.writable||o.configurable)||(o={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(e,n,o)}:function(e,t,i,n){void 0===n&&(n=i),e[n]=t[i]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),r=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)"default"!==i&&Object.prototype.hasOwnProperty.call(e,i)&&n(t,e,i);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Horizon=t.GA4=t.UA=void 0;var s=i(922),a=i(362),l=i(843),u=i(304);t.UA=r(i(362)),t.GA4=r(i(922)),t.Horizon=r(i(843));var d=new Map([["push",a.pushSender],["global",a.globalSender]]);t.default=function(e){var t=[],i=!!(null==e?void 0:e.panic);return{addGA4:function(){var e=new s.GA4Tracker;return t.push(e),this},addUA:function(e){var n=[d.get(e.sender)],o=new a.UATracker({panic:i,senders:n});return t.push(o),this},addHorizon:function(e){var i=e.client,n=new l.HorizonTracker(i);return t.push(n),this},addCustom:function(e){return t.push(e),this},build:function(){return t.find((function(e){return e instanceof a.UATracker}))||this.addUA({sender:"push"}),new u.Tracker({clients:t})}}}},987:function(e,t,i){var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=n(i(156));window.trackerBuilder=o.default}},t={};!function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}(987)})()},61:function(e,t){var i,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,void 0===(n="function"==typeof(i=function(e){"use strict";e.__esModule=!0,e.PLUGIN_NAME=e.DEFAULT_CONFIGS=void 0;e.PLUGIN_NAME="viewport_play_plugin";e.DEFAULT_CONFIGS={threshold:.4,firstPlayThreshold:1,timeout:500,useTsRefView:!0}})?i.apply(t,[t]):i)||(e.exports=n)},877:function(e,t,i){var n,o,r;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,o=[t,i(61)],n=function(e,t){"use strict";e.__esModule=!0,e.env=void 0,e.isMobileIOS=function(){return!!(navigator.userAgent&&navigator.userAgent.toLowerCase()||"").match(/iPhone|iPad|iPod/i)},e.logging=void 0;var i=window.glb&&window.glb.getCurrentEnv&&window.glb.getCurrentEnv()||"local";e.env=i;e.logging=function(e){console[e]||(e="log");for(var i=arguments.length,n=new Array(i>1?i-1:0),o=1;o<i;o++)n[o-1]=arguments[o];return console[e]("["+t.PLUGIN_NAME+"]",...n)}},void 0===(r=n.apply(t,o))||(e.exports=r)},579:function(e,t,i){var n,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,void 0===(o="function"==typeof(n=function(e){"use strict";e.__esModule=!0,e.default=void 0;e.default=()=>i(871)})?n.apply(t,[t]):n)||(e.exports=o)},788:function(e,t,i){var n,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,void 0===(o="function"==typeof(n=function(e){"use strict";e.__esModule=!0,e.sendAutoplayTrackingEvent=function(e){window.trackerBuilder().addGA4().build().send(e)},window.trackerBuilder||i(902)})?n.apply(t,[t]):n)||(e.exports=o)},871:function(e,t,i){var n,o;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,n=[i(61),i(877),i(788)],void 0===(o=function(t,i,n){"use strict";var{Events:o,CorePlugin:r}=Clappr,{Events:s}=WP3;e.exports=class extends r{get name(){return t.PLUGIN_NAME}get supportedVersion(){return{min:Clappr.version}}get deviceGroup(){return window.cdaaas&&window.cdaaas.SETTINGS&&window.cdaaas.SETTINGS.MOBILE_GROUP||"desktop"}get enableViewportPlay(){return this.options.enableViewportPlay||!1}get shouldInit(){var e="smart"===this.deviceGroup,t=navigator&&navigator.connection&&("wifi"===navigator.connection.type||!navigator.connection.type);return e&&t||!e||(0,i.isMobileIOS)()}get isPlaying(){return this.container.isPlaying()}constructor(e){super(e),this.core=e,this.enabled=!1,this.isVideoEnded=!1,this.isAlreadyPlayed=!1,this.videoTimeoutId=null,this.uniqueId=this.core.uniqueId,this.setPluginOptions(),this.enableViewportPlay&&this.shouldInit&&(this.setUpObserver(),this.enable())}setPluginOptions(){this.pluginOptions=this.options.ViewportPlayPlugin||{};var{firstPlayThreshold:e,threshold:i,timeout:n,viewportPlayCallback:o,useTsRefView:r}=this.pluginOptions;this.firstPlayThreshold=null!=e?e:t.DEFAULT_CONFIGS.firstPlayThreshold,this.threshold=null!=i?i:t.DEFAULT_CONFIGS.threshold,this.timeout=null!=n?n:t.DEFAULT_CONFIGS.timeout,this.viewportPlayCallback=o||null,this.isUseTsRefView=null!=r?r:t.DEFAULT_CONFIGS.useTsRefView}setUpObserver(){var e=this.getOberserverTreshold();this.createIntersectionObserver(((e,t)=>this.observerCallback(e,t)),e)}getOberserverTreshold(){return this.threshold===this.firstPlayThreshold?this.threshold:[this.threshold,this.firstPlayThreshold]}createIntersectionObserver(e,t){window.IntersectionObserver&&new IntersectionObserver(((t,i)=>{e(t,i)}),{threshold:t}).observe(this.core.el)}observerCallback(e,t){e.forEach((e=>{var{intersectionRatio:i}=e;this.enabled?(this.isVideoInViewport(i)?this.playVideo():(this.pauseVideoPlaying(),this.clearVideoTimeout()),this.isAlreadyPlayed&&t.unobserve(this.core.el)):this.isAlreadyPlayed&&t.unobserve(this.core.el)}))}isVideoInViewport(e){return e>=(this.isAlreadyPlayed?this.threshold:this.firstPlayThreshold)}playVideo(){this.isPlaying||this.isVideoEnded||this.playWithDelay()}playWithDelay(){if(null===this.videoTimeoutId){var e=0,t=this.timeout,i=this.core.el.closest(".content-video");if(i&&this.isUseTsRefView){var o=i.getAttribute("data-ts-view");o&&(e=Date.now()-parseInt(o,10)),t=e>this.timeout?0:this.timeout-e}this.videoTimeoutId=setTimeout((()=>{this.enabled&&(this.container.play(),this.isAlreadyPlayed=!0,this.viewportPlayCallback&&this.viewportPlayCallback(this.container.options.source),(0,n.sendAutoplayTrackingEvent)({action:"video_start_autoplay",value:this.core.options.source,category:"video",video_start:"video_start_autoplay",nointeraction:!0}))}),t)}}pauseVideoPlaying(){this.isPlaying&&this.container.pause()}clearVideoTimeout(){null!==this.videoTimeoutId&&(clearTimeout(this.videoTimeoutId),this.videoTimeoutId=null,this.isUseTsRefView=!1)}bindEvents(){this.listenTo(this.core.mediaControl,o.MEDIACONTROL_CONTAINERCHANGED,this.onContainerChanged)}onContainerChanged(){this.container&&(this.isVideoEnded=!1,this.stopListening(this.container)),this.container=this.core.getCurrentContainer(),this.listenTo(this.container,o.CONTAINER_ENDED,this.onEnded),this.listenToOnce(this.container,s.WM_UNMUTED,this.onUnmuted)}onUnmuted(){this.core.configure({mute:!1})}onEnded(){this.isVideoEnded=!0}}}.apply(t,n))||(e.exports=o)}},t={},i=function i(n){var o=t[n];if(void 0!==o)return o.exports;var r=t[n]={exports:{}};return e[n].call(r.exports,r,r.exports,i),r.exports}(579);ViewportPlayPlugin=i.default})();